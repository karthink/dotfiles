#!/bin/bash
.  $HOME/.dmenurc
choices=$(fd --type f --hidden --follow --exclude .git \
	--exclude *~ \
	| fzf --layout=reverse --height=100% -1 --no-mouse --multi --inline-info)
	echo $choices
	for choice in $choices; do
		if ! [[ -z $(file "$choice" | grep "ASCII") ]]; then
			setsid terminal -e "$EDITOR" "$choice" >/dev/null 2>&1 &
			exit
		fi
		case "$choice" in
			*.png|*.jpg|*.svg|*.bmp) setsid "$IMAGEVIEWER" "$choice" >/dev/null 2>&1 & ;;

			*.pdf|*.ps) setsid "$READER" "$choice" >/dev/null 2>&1 & ;;

			*.txt|*.md) setsid terminal -e "$EDITOR" "$choice" >/dev/null 2>&1 & ;;

			*.html) setsid "$BROWSER" "$choice" >/dev/null 2>&1 & ;;

			*.mp4|*.avi|*.flv|*.mkv) setsid "$MEDIAPLAYER" "$choice" >/dev/null 2>&1 & ;;

			*.tex|*.sh|*.py) setsid terminal -e "$EDITOR" "$choice" >/dev/null 2>&1 & ;;
		esac
		# xdg-open  "$choice"
	done
